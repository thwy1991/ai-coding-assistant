# AI Coding Assistant - æ¨¡å‹é…ç½®æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é…ç½®å’Œä½¿ç”¨ä¸åŒçš„AIæ¨¡å‹ã€‚

## æ”¯æŒçš„æ¨¡å‹

### GPT-4 (OpenAI)

**æ”¯æŒçš„æ¨¡å‹ï¼š**
- `gpt-4` - æœ€å¼ºå¤§çš„GPT-4æ¨¡å‹
- `gpt-4-turbo` - æ›´å¿«é€Ÿçš„GPT-4 Turbo
- `gpt-3.5-turbo` - ç»æµé«˜æ•ˆçš„GPT-3.5 Turbo

**è·å–APIå¯†é’¥ï¼š**
1. è®¿é—® [OpenAIå¹³å°](https://platform.openai.com/)
2. æ³¨å†Œ/ç™»å½•è´¦æˆ·
3. è¿›å…¥ API keys é¡µé¢
4. åˆ›å»ºæ–°çš„APIå¯†é’¥

**é…ç½®æ–¹å¼ï¼š**

ç¯å¢ƒå˜é‡ï¼š
```bash
export OPENAI_API_KEY="sk-..."
```

secrets.tomlï¼š
```toml
OPENAI_API_KEY = "sk-..."
```

åœ¨é¡µé¢ä¸­ï¼š
é€‰æ‹©"GPT-4"æ¨¡å‹ç³»åˆ—ï¼Œè¾“å…¥APIå¯†é’¥ã€‚

**å®˜æ–¹æ–‡æ¡£ï¼š** https://platform.openai.com/docs

---

### Claude (Anthropic)

**æ”¯æŒçš„æ¨¡å‹ï¼š**
- `claude-3-opus-20240229` - æœ€å¼ºå¤§çš„Claudeæ¨¡å‹
- `claude-3-sonnet-20240229` - å¹³è¡¡æ€§èƒ½å’Œé€Ÿåº¦
- `claude-3-haiku-20240307` - å¿«é€Ÿå“åº”çš„Claudeæ¨¡å‹

**è·å–APIå¯†é’¥ï¼š**
1. è®¿é—® [Anthropicæ§åˆ¶å°](https://console.anthropic.com/)
2. æ³¨å†Œ/ç™»å½•è´¦æˆ·
3. åˆ›å»ºAPIå¯†é’¥

**é…ç½®æ–¹å¼ï¼š**

ç¯å¢ƒå˜é‡ï¼š
```bash
export ANTHROPIC_API_KEY="sk-ant-..."
```

secrets.tomlï¼š
```toml
ANTHROPIC_API_KEY = "sk-ant-..."
```

åœ¨é¡µé¢ä¸­ï¼š
é€‰æ‹©"Claude"æ¨¡å‹ç³»åˆ—ï¼Œè¾“å…¥APIå¯†é’¥ã€‚

**å®˜æ–¹æ–‡æ¡£ï¼š** https://docs.anthropic.com/

---

### DeepSeek

**æ”¯æŒçš„æ¨¡å‹ï¼š**
- `deepseek-chat` - å¯¹è¯æ¨¡å‹
- `deepseek-coder` - ä»£ç ä¼˜åŒ–æ¨¡å‹

**è·å–APIå¯†é’¥ï¼š**
1. è®¿é—® [DeepSeekå¹³å°](https://platform.deepseek.com/)
2. æ³¨å†Œ/ç™»å½•è´¦æˆ·
3. è¿›å…¥API Keysé¡µé¢
4. åˆ›å»ºAPIå¯†é’¥

**é…ç½®æ–¹å¼ï¼š**

ç¯å¢ƒå˜é‡ï¼š
```bash
export DEEPSEEK_API_KEY="sk-..."
```

secrets.tomlï¼š
```toml
DEEPSEEK_API_KEY = "sk-..."
```

åœ¨é¡µé¢ä¸­ï¼š
é€‰æ‹©"DeepSeek"æ¨¡å‹ç³»åˆ—ï¼Œè¾“å…¥APIå¯†é’¥ã€‚

**å®˜æ–¹æ–‡æ¡£ï¼š** https://platform.deepseek.com/docs

---

### GLM (æ™ºè°±AI)

**æ”¯æŒçš„æ¨¡å‹ï¼š**
- `glm-4` - æœ€æ–°çš„GLM-4æ¨¡å‹
- `glm-3-turbo` - å¿«é€Ÿå“åº”çš„GLM-3 Turbo

**è·å–APIå¯†é’¥ï¼š**
1. è®¿é—® [æ™ºè°±AIå¼€æ”¾å¹³å°](https://open.bigmodel.cn/)
2. æ³¨å†Œ/ç™»å½•è´¦æˆ·
3. è¿›å…¥APIç®¡ç†é¡µé¢
4. åˆ›å»ºAPI Key

**é…ç½®æ–¹å¼ï¼š**

ç¯å¢ƒå˜é‡ï¼š
```bash
export ZHIPUAI_API_KEY="..."
```

secrets.tomlï¼š
```toml
ZHIPUAI_API_KEY = "..."
```

åœ¨é¡µé¢ä¸­ï¼š
é€‰æ‹©"GLM"æ¨¡å‹ç³»åˆ—ï¼Œè¾“å…¥APIå¯†é’¥ã€‚

**å®˜æ–¹æ–‡æ¡£ï¼š** https://open.bigmodel.cn/dev/api

---

### Mock (æ¨¡æ‹Ÿæ¨¡å¼)

ç”¨äºæµ‹è¯•å’Œæ¼”ç¤ºï¼Œä¸éœ€è¦APIå¯†é’¥ï¼Œè¿”å›é¢„è®¾çš„ç¤ºä¾‹ä»£ç ã€‚

---

## åœ¨åº”ç”¨ä¸­åˆ‡æ¢æ¨¡å‹

1. åœ¨å·¦ä¾§è¾¹æ æ‰¾åˆ°"ğŸ¤– AIæ¨¡å‹é…ç½®"
2. ä»"æ¨¡å‹ç³»åˆ—"ä¸‹æ‹‰æ¡†é€‰æ‹©æä¾›å•†
3. ä»"å…·ä½“æ¨¡å‹"ä¸‹æ‹‰æ¡†é€‰æ‹©æ¨¡å‹
4. ï¼ˆå¯é€‰ï¼‰åœ¨"APIå¯†é’¥"è¾“å…¥æ¡†ä¸­è¾“å…¥å¯†é’¥
5. ç‚¹å‡»"ğŸ”„ åˆ‡æ¢æ¨¡å‹"æŒ‰é’®

åˆ‡æ¢æ¨¡å‹åï¼Œå½“å‰ä¼šè¯çš„å¯¹è¯å†å²ä¼šè¢«ä¿ç•™ã€‚

---

## æ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ç³»åˆ— | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ | æˆæœ¬ |
|---------|--------|----------|------|
| GPT-4 | é€šç”¨èƒ½åŠ›å¼ºï¼Œä»£ç è´¨é‡é«˜ | å¤æ‚é—®é¢˜ã€ä»£ç ç”Ÿæˆ | è¾ƒé«˜ |
| Claude | ç†è§£èƒ½åŠ›å¼ºï¼Œå®‰å…¨æ€§é«˜ | ä»£ç å®¡æŸ¥ã€æ–‡æ¡£ç”Ÿæˆ | ä¸­ç­‰ |
| DeepSeek | æ€§ä»·æ¯”é«˜ï¼Œä¸­æ–‡å‹å¥½ | æ—¥å¸¸å¼€å‘ã€ä»£ç ç”Ÿæˆ | è¾ƒä½ |
| GLM | å›½äº§æ¨¡å‹ï¼Œä¸­æ–‡ä¼˜åŒ– | ä¸­æ–‡é¡¹ç›®ã€æœ¬åœ°éœ€æ±‚ | ä¸­ç­‰ |

---

## APIå¯†é’¥å®‰å…¨

### æœ€ä½³å®è·µ

1. **ä¸è¦å°†APIå¯†é’¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶**
   - `.env` å’Œ `.streamlit/secrets.toml` å·²åœ¨ `.gitignore` ä¸­

2. **ä½¿ç”¨ç¯å¢ƒå˜é‡**ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
   - æ›´å®‰å…¨
   - ä¾¿äºå®¹å™¨åŒ–éƒ¨ç½²

3. **å®šæœŸè½®æ¢å¯†é’¥**
   - æé«˜å®‰å…¨æ€§
   - é˜²æ­¢æ»¥ç”¨

4. **è®¾ç½®ä½¿ç”¨é™åˆ¶**
   - åœ¨æä¾›å•†æ§åˆ¶å°è®¾ç½®æœˆåº¦é¢„ç®—
   - ç›‘æ§APIä½¿ç”¨é‡

---

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ— æ³•è¿æ¥åˆ°API

**å¯èƒ½åŸå› ï¼š**
- APIå¯†é’¥æ— æ•ˆ
- ç½‘ç»œè¿æ¥é—®é¢˜
- æœåŠ¡æš‚æ—¶ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ç½‘ç»œè¿æ¥
3. æ£€æŸ¥æœåŠ¡å•†çŠ¶æ€é¡µé¢
4. å°è¯•åˆ‡æ¢åˆ°å…¶ä»–æ¨¡å‹

### é—®é¢˜ï¼šAPIé…é¢ä¸è¶³

**å¯èƒ½åŸå› ï¼š**
- è¶…å‡ºå…è´¹é¢åº¦
- æœˆåº¦é¢„ç®—é™åˆ¶

**è§£å†³æ–¹æ¡ˆï¼š**
1. åœ¨æä¾›å•†æ§åˆ¶å°æ£€æŸ¥ä½™é¢
2. å¢åŠ é¢„ç®—æˆ–å……å€¼
3. åˆ‡æ¢åˆ°æ›´ç»æµçš„æ¨¡å‹

### é—®é¢˜ï¼šæ¨¡å‹åˆ‡æ¢ä¸ç”Ÿæ•ˆ

**å¯èƒ½åŸå› ï¼š**
- APIå¯†é’¥é…ç½®é”™è¯¯
- å®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
2. ç¡®è®¤APIå¯†é’¥æ­£ç¡®
3. é‡æ–°å¯åŠ¨åº”ç”¨

---

## è‡ªå®šä¹‰æ¨¡å‹é…ç½®

å¦‚éœ€æ·»åŠ æ–°çš„æ¨¡å‹æä¾›å•†ï¼Œç¼–è¾‘ `src/ai_coding/llm_clients.py`ï¼š

1. åˆ›å»ºæ–°çš„å®¢æˆ·ç«¯ç±»
2. å®ç° `chat_completion` å’Œ `generate` æ–¹æ³•
3. åœ¨ `MODEL_CONFIGS` ä¸­æ·»åŠ é…ç½®
4. åœ¨ `create_llm_client` å‡½æ•°ä¸­æ·»åŠ å¯¹åº”é€»è¾‘

ç¤ºä¾‹ï¼š
```python
class MyCustomClient:
    def __init__(self, api_key: str):
        self.api_key = api_key

    async def chat_completion(self, messages: List[Dict], **kwargs) -> str:
        # å®ç°APIè°ƒç”¨
        return response

    async def generate(self, prompt: str, **kwargs) -> str:
        messages = [{"role": "user", "content": prompt}]
        return await self.chat_completion(messages, **kwargs)
```

ç„¶ååœ¨ `MODEL_CONFIGS` ä¸­æ·»åŠ ï¼š
```python
"MyModel": {
    "provider": "mycustom",
    "models": ["model-v1", "model-v2"],
    "default": "model-v1",
    "api_key_env": "MYMODEL_API_KEY"
}
```

---

## è·å–å¸®åŠ©

- [OpenAIæ–‡æ¡£](https://platform.openai.com/docs)
- [Anthropicæ–‡æ¡£](https://docs.anthropic.com/)
- [DeepSeekæ–‡æ¡£](https://platform.deepseek.com/docs)
- [æ™ºè°±AIæ–‡æ¡£](https://open.bigmodel.cn/dev/api)

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueã€‚
